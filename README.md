# ./
## Инкримент 1
  - Принимать и хранить произвольные метрики двух типов:
    - Тип gauge float64 - новое значение должно замещать предыдущее.
    - Тип counter int64 - новое значение должно добавляться к предыдущему, если какое-то значение уже было известно серверу.
  - Принимать метрики по протоколу НТТР методом POST
  - Принимать данные в формате 
    - http://<AДPEC_CEPBEPA>/update/<ТИП_МЕТРИКИ>/<ИМЯ_МЕТРИКИ>/<ЗНАЧЕНИЕ_МЕТРИКИ>
    - Content-Type: text/plain
  - При успешном приёме возвращать http.Statusok
  - При попытке передать запрос без имени метрики возвращать http.StatusNotFound
  - При попытке передать запрос с некорректным типом метрики или значением возвращать http.StatusBadRequest
  - Редиректы не поддерживаются.
  - Для хранения метрик объявите тип MemStorage .
  	Рекомендуем использовать тип struct с полем-коллекцией внутри ( slice или mар ).
	В будущем это позволит добавлять к объекту хранилища новые поля, например логер или мьютекс, чтобы можно было использовать их в методах.
	Опишите интерфейс для взаимодействия с этим хранилищем.

## Инкримент 2
Разработайте агент (HTTP-клиент) для сбора рантайм-метрик и их последующей отправки на сервер по протоколу HTTP.
Агент должен собирать метрики двух типов:
- Тип gauge, float64.
- Тип counter, int64.

В качестве источника метрик используйте пакет runtime.
Нужно собирать следующие метрики типа gauge:
- Alloc
- BuckHashSys
- Frees
- GCCPUFraction
- GCSys
- HeapAlloc
- HeapIdle
- HeapInuse
- HeapObjects
- HeapReleased
- HeapSys
- LastGC
- Lookups
- MCacheInuse
- MCacheSys
- MSpanInuse
- MSpanSys
- Mallocs
- NextGC
- NumForcedGC
- NumGC
- OtherSys
- PauseTotalNs
- StackInuse
- StackSys
- Sys
- TotalAlloc

К метрикам пакета runtime добавьте ещё две:
- PollCount (тип counter) — счётчик, увеличивающийся на 1 при каждом обновлении метрики из пакета runtime (на каждый pollInterval — см. ниже).
- RandomValue (тип gauge) — обновляемое произвольное значение.

По умолчанию приложение должно:
- Обновлять метрики из пакета runtime с заданной частотой: pollInterval — 2 секунды.
- Отправлять метрики на сервер с заданной частотой: reportInterval — 10 секунд.

Чтобы приостанавливать работу функции на заданное время, используйте вызов time.Sleep(n * time.Second). Подробнее о пакете time и его возможностях вы узнаете в третьем спринте.

Метрики нужно отправлять по протоколу HTTP методом POST:

Формат данных — http://<АДРЕС_СЕРВЕРА>/update/<ТИП_МЕТРИКИ>/<ИМЯ_МЕТРИКИ>/<ЗНАЧЕНИЕ_МЕТРИКИ>.

Адрес сервера — http://localhost:8080.
Заголовок — Content-Type: text/plain.

Пример запроса к серверу:
```POST /update/counter/someMetric/527 HTTP/1.1
Host: localhost:8080
Content-Length: 0
Content-Type: text/plain 
```

Пример ответа от сервера:
```HTTP/1.1 200 OK
Date: Tue, 21 Feb 2023 02:51:35 GMT
Content-Length: 11
Content-Type: text/plain; charset=utf-8 
```

Покройте код агента и сервера юнит-тестами.

## Инкримент 3
Вы написали приложение с помощью пакета стандартной библиотеки net/http.
Используя любой внешний пакет (роутер или фреймворк), совместимый с net/http, перепишите ваш код.

Доработайте сервер так, чтобы в ответ на запрос 
GET http://<АДРЕС_СЕРВЕРА>/value/<ТИП_МЕТРИКИ>/<ИМЯ_МЕТРИКИ> 
он возвращал аккумулированное значение метрики в текстовом виде со статусом http.StatusOK.

При попытке запроса неизвестной метрики сервер должен возвращать http.StatusNotFound.

По запросу GET http://<АДРЕС_СЕРВЕРА>/ сервер должен отдавать HTML-страницу со списком имён и значений всех известных ему на текущий момент метрик.

Хендлеры должны взаимодействовать с экземпляром MemStorage при помощи соответствующих интерфейсных методов.

---
## Инкримент 6
логи

## 8
Добавьте поддержку gzip в код сервера и агента. Научите:
Агент передавать данные в формате gzip.
Сервер опционально принимать запросы в сжатом формате (при наличии соответствующего HTTP-заголовка Content-Encoding).
Отдавать сжатый ответ клиенту, который поддерживает обработку сжатых ответов (с HTTP-заголовком Accept-Encoding).
Функция сжатия должна работать для контента с типами application/json и text/html.
Вспомните middleware из урока про HTTP-сервер, это может вам помочь.

## 9
Доработайте код сервера, чтобы он мог с заданной периодичностью сохранять текущие значения метрик на диск в указанный файл, а на старте — опционально загружать сохранённые ранее значения. При штатном завершении сервера все накопленные данные должны сохраняться.
Сервер должен принимать соответствующие параметры конфигурации через флаги и переменные окружения:
Флаг -i, переменная окружения STORE_INTERVAL — интервал времени в секундах, по истечении которого текущие показания сервера сохраняются на диск (по умолчанию 300 секунд, значение 0 делает запись синхронной).
Флаг -f, переменная окружения FILE_STORAGE_PATH — путь до файла, куда сохраняются текущие значения. Имя файла для значения по умолчанию придумайте сами.
Флаг -r, переменная окружения RESTORE — булево значение (true/false), определяющее, загружать или нет ранее сохранённые значения из указанного файла при старте сервера (по умолчанию true).
Приоритет параметров сервера должен быть таким:
Если указана переменная окружения, то используется она.
Если нет переменной окружения, но есть флаг, то используется он.
Если нет ни переменной окружения, ни флага, то используется значение по умолчанию.